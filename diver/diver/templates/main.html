{% extends 'base.html' %}
{% block head %}
<style>
.ellipsis {
  width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.item {
  padding-bottom: 40px;
  text-align: center;
}
.item img {
  width: 100%;
}
.item > .row {
  width: 100%;
}
</style>
{% endblock %}
{% block content %}
  {% load staticfiles %}
  <div class="jumbotron">
    <div class="container">
      <h1>DIVER</h1>

      <p>추천은 저희가 해 드립니다. 그냥 다 입으세요. 다 입어.</p>
      <p><a href="#" role="button" class="btn btn-default btn-lg">Learn more</a></p>
    </div>
  </div>
  <div class="container">
    <div class="row">
      {% for item in items %}
        <div class="col-lg-3 col-md-4 col-xs-6 item">
            <img src={{ item.images }}>
            <div class="row">
              <div class="col-md-9">
                <p class="btn btn-link ellipsis">{{ item.name }}</p>
              </div>
              <div class="col-md-3">
                <p class="btn btn-link" onclick="">{{ item.price }}</p>
              </div>
            </div>
            <a class="btn btn- like" onclick="like({{item.id}})">Like!</a>
        </div>
      {% endfor %}
    </div>

    <div class="row">
      <div class="col-md-4">
        <h2>이번달의 인기상품</h2>
        <p>탑텐 커플 후리스</p>
        <p><a href="#" role="button" class="btn btn-default">View details</a></p>
      </div>

      <div class="col-md-4">
        <h2>저번달의 인기상품</h2>

        <p>종헌이의 폴햄 맨투맨</p>
        <p><a href="#" role="button" class="btn btn-default">View details</a></p>
      </div>

      <div class="col-md-4">
        <h2>선조 3년의 인기상품</h2>

        <p>간지나는 저고리</p>
        <p><a href="#" role="button" class="btn btn-default">상세히 살피기</a></p>
      </div>
    </div>
  </div>
{% endblock %}

{% block script %}
  <script>
    function like(id) {
      $.ajax({
        'method': 'get',
        'dataType': 'text',
        'url': '/like/'+id,
        'success': function(res){
          //console.log("success!!" + reservationID);
          alert(res);
          location.reload();
        },
        'error': function(request,status,error){
          console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
        }
      });
    }
  </script>
{% endblock %}
